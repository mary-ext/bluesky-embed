const t=(t,e)=>({text:t,features:t.length>0?e:void 0}),e=(e,o)=>{if(void 0===o||0===o.length)return[t(e,void 0)];const r=[],c=e.length;let h=0,d=0;const n=(t,o)=>{let r=t;if(e.charCodeAt(r)<128)for(r+=1,d+=1;d+8<=o&&r+8<=c;){if(!((e.charCodeAt(r)|e.charCodeAt(r+1)|e.charCodeAt(r+2)|e.charCodeAt(r+3)|e.charCodeAt(r+4)|e.charCodeAt(r+5)|e.charCodeAt(r+6)|e.charCodeAt(r+7))<128))break;r+=8,d+=8}for(;d<o&&r<c;){const t=e.charCodeAt(r);t<128?(r+=1,d+=1):t<2048?(r+=1,d+=2):t<55296||t>56319?(r+=1,d+=3):(r+=2,d+=4)}return r};for(let s=0,a=o.length;s<a;s++){const c=o[s],{byteStart:a,byteEnd:i}=c.index,l=c.features;if(!(a>i||0===l.length)){if(d<a){const o=n(h,a);o>h&&r.push(t(e.slice(h,o),void 0)),h=o}{const o=n(h,i);o>h&&r.push(t(e.slice(h,o),l)),h=o}}}return h<c&&r.push(t(e.slice(h),void 0)),r};export{e as s};
